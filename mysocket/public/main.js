/*! jtwmy - v1.0.0 - 2015-11-06 */~function(a){function b(){u.stop().animate({opacity:0},{complete:function(){u.hide(),t.show(),r.focus()}})}function c(){if(z){setTimeout(function(){z=!0},1e3);var a=e(r.val().trim());""!=a&&a.length>0?(r.val(""),z=!1,g({username:n,newMsg:a},{msgType:"newMsg"}),v.emit("newMsg",{newMsg:a})):alert("The message cannot be empty")}else alert("Ban refresh！！")}function d(){n=e(q.val().trim()),n&&""!=n?v.emit("addUser",{username:n}):alert("Please input your user name ")}function e(b){return a("<span></span>").text(b).text()}function f(b){var c=a("<li></li>").addClass("log").text(b);l(c)}function g(a,b){"addUser"==b.msgType?j(a):"newMsg"==b.msgType?h(a):"leave"==b.msgType?k(a):"change"==b.msgType?showChangeMsg(a):"login"==b.msgType&&i(a)}function h(b){var c=a('<span class="username"></span>').text(b.username).css("color",y[x]),d=a('<span class="messageBody"></span>').text(b.newMsg),e=a('<li class="message"></li>').append(c,d);l(e)}function i(a){var b="Welcome to Lv Xiaodong's chat room";f(b),f("there are "+a.userCount+" participants")}function j(a){f(a.username+" come in"),f("there are "+a.userCount+" participants")}function k(a){f(a.username+" leave"),f("there are "+a.userCount+" participants")}function l(a){s.append(a),a.hide().fadeIn(w),m()}function m(){s[0].scrollTop=s[0].scrollHeight}var n,o="http://45.62.113.108:3001/",p=a(window),q=a(".usernameInput"),r=a(".inputMessage"),s=(a(".connectCount"),a(".messages")),t=(a(".chatArea"),a(".chat")),u=a(".login"),v=io.connect(o),w=200,x=Math.floor(12*Math.random()),y=["#e21400","#91580f","#f8a700","#f78b00","#58dc00","#287b00","#a8f07a","#4ae8c4","#3b88eb","#3824aa","#a700ff","#d300e7"];q.focus(),p.keydown(function(a){13==a.which&&(n?c():d())});var z=!0;v.on("addUser",function(a){var b={msgType:"addUser"};g(a,b)}),v.on("newMsg",function(a){var b={msgType:"newMsg"};g(a,b)}),v.on("login",function(a){var c={msgType:"login"};g(a,c),b()}),v.on("repeat",function(a){alert("name repeat,Please change your name!")}),v.on("leave",function(a){var b={msgType:"leave"};g(a,b)}),v.on("reLogin",function(a){window.location.href=o})}(jQuery);